/* ============================================================
   MOBILE MENU MODAL — WAVENATION (PHONE-NATIVE)
   Drag • Exit • Safe-area • Reduced motion
============================================================ */

.overlay {
  position: fixed;
  inset: 0;
  z-index: 120;

  display: flex;
  align-items: flex-end;

  touch-action: none;

  animation: overlayFadeIn 180ms ease-out forwards;
}

.overlay.closing {
  animation: overlayFadeOut 180ms ease-in forwards;
}

/* ------------------------------------------------------------
   BACKDROP
------------------------------------------------------------ */

.backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
  border: 0;
}

/* ------------------------------------------------------------
   PANEL (BOTTOM SHEET)
   (5) Safe-area inset support
------------------------------------------------------------ */

.panel {
  position: relative;
  width: 100%;

  background: rgba(11,13,15,0.96);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);

  border-radius: 24px 24px 0 0;

  /* base padding + safe-area for iOS home bar */
  padding: 14px 16px calc(28px + env(safe-area-inset-bottom));

  transform-origin: bottom center;

  animation:
    slideUp 220ms cubic-bezier(0.22, 0.61, 0.36, 1),
    phonePopIn 220ms ease-out;

  /* helps prevent the browser from hijacking the swipe */
  touch-action: none;
}

.panelClosing {
  animation:
    slideDown 200ms cubic-bezier(0.4, 0, 1, 1),
    phonePopOut 200ms ease-in;
}

/* ------------------------------------------------------------
   GRAB HANDLE (PHONE AFFORDANCE)
------------------------------------------------------------ */

.handle {
  width: 46px;
  height: 4px;
  border-radius: 999px;
  background: rgba(255,255,255,0.18);
  margin: 0 auto 12px;
}

/* ------------------------------------------------------------
   ANIMATIONS — ENTRY
------------------------------------------------------------ */

@keyframes slideUp {
  from { transform: translateY(100%); }
  to   { transform: translateY(0); }
}

@keyframes phonePopIn {
  from { transform: translateY(100%) scale(0.98); }
  to   { transform: translateY(0) scale(1); }
}

@keyframes overlayFadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* ------------------------------------------------------------
   ANIMATIONS — EXIT
------------------------------------------------------------ */

@keyframes slideDown {
  from { transform: translateY(0); }
  to   { transform: translateY(100%); }
}

@keyframes phonePopOut {
  from { transform: translateY(0) scale(1); }
  to   { transform: translateY(100%) scale(0.985); }
}

@keyframes overlayFadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

/* ------------------------------------------------------------
   (4) Reduced motion support
------------------------------------------------------------ */

@media (prefers-reduced-motion: reduce) {
  .overlay,
  .overlay.closing,
  .panel,
  .panelClosing {
    animation: none !important;
  }

  .panel {
    transition: none !important;
    transform: none !important;
  }
}
